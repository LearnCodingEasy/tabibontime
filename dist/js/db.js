"use strict";var _firebaseFirestore=require("https://www.gstatic.com/firebasejs/9.17.2/firebase-firestore.js"),Database=(0,_firebaseFirestore.getFirestore)(),colRef=(0,_firebaseFirestore.collection)(Database,"collectionName"),SearchForm=document.querySelector(".Search"),queries=(SearchForm.addEventListener("submit",function(e){e.preventDefault();e=document.getElementById("InputSearch");console.log("Input Search: ",e.value)}),(0,_firebaseFirestore.query)(colRef,(0,_firebaseFirestore.orderBy)("createdAt"))),inner=("indexedDB"in window?(console.log("IndexedDB is supported in this browser"),(0,_firebaseFirestore.enableIndexedDbPersistence)(Database).then(function(){console.log("// Enable Offline Data Successful")}).catch(function(e){"failed-precondition"===e.code?console.log("failed persistence can only be enabled in one tab at a time."):"unimplemented"===e.code&&console.log("The current browser does not support all of the features required to enable persistence.")})):console.error("IndexedDB is not supported in this browser"),(0,_firebaseFirestore.onSnapshot)(queries,{includeMetadataChanges:!0},function(t){console.log("snapshot: ",t.docs),t.docChanges().forEach(function(e){"added"===e.type&&(console.log("New recipe added: ",e.doc.data()),showItems(e.doc.data(),e.doc.id)),"removed"===e.type&&(console.log("Recipe removed: ",e.doc.data()),removeItem(e.doc.id));e=t.metadata.fromCache?"local cache":"server";console.log("Data came from "+e)})}),document.getElementById("inner")),showItems=function(e,t){var o=e.title,e=e.description,r=document.createElement("div");r.classList.add("className"),r.innerHTML='\n    <div class="card-panel recipe white row" data-id="'.concat(t,'">\n      <img src="image/dish.png" alt="recipe thumb">\n      <div class="recipe-details">\n        <div class="recipe-title">').concat(o,'</div>\n        <div class="recipe-ingredients">').concat(e,'</div>\n      </div>\n      <div class="recipe-delete">\n        <i class="material-icons"  data-id="').concat(t,'">delete_outline</i>\n      </div>\n    </div>\n    '),inner.appendChild(r)},addItemForm=document.querySelector(".add"),innerItems=(addItemForm.addEventListener("submit",function(e){e.preventDefault(),(0,_firebaseFirestore.addDoc)(colRef,{title:addItemForm.title.value,description:addItemForm.description.value,createdAt:(0,_firebaseFirestore.serverTimestamp)()}).then(function(){addItemForm.reset()}).catch(function(e){return console.log(e)})}),document.querySelector(".recipes")),removeItem=(console.log("innerItem: ",innerItems),innerItems.addEventListener("click",function(e){"I"===e.target.tagName&&(e=e.target.getAttribute("data-id"),e=(0,_firebaseFirestore.doc)(Database,"collectionName",e),console.log("colRef: ",e),(0,_firebaseFirestore.deleteDoc)(e).then(function(){console.log("Item Is Delete")}))}),function(e){document.querySelector('.recipe[data-id="'.concat(e,'"]')).remove()}),updateForm=document.querySelector(".update");updateForm.addEventListener("submit",function(e){e.preventDefault();e=(0,_firebaseFirestore.doc)(Database,"collectionName",updateForm.id.value);(0,_firebaseFirestore.updateDoc)(e,{title:updateForm.title.value}).then(function(){updateForm.reset()})});
//# sourceMappingURL=db.js.map
